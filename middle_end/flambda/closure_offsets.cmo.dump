(setglobal Closure_offsets!
  (let
    (add_closure_offsets =
       (function param param
         (funct-body middle_end/flambda/closure_offsets.ml(25)<ghost>:1345-3772
           (let
             (free_vars =a (field 1 param)
              function_decls =a (field 0 param)
              free_variable_offsets =a (field 1 param)
              function_offsets =a (field 0 param))
             (before middle_end/flambda/closure_offsets.ml(30):1689-3772
               (let
                 (assign_function_offset =
                    (function id function_decl param
                      (funct-body middle_end/flambda/closure_offsets.ml(30)<ghost>:1716-2444
                        (let
                          (env_pos =a (field 1 param) map =a (field 0 param))
                          (before middle_end/flambda/closure_offsets.ml(31):1754-2444
                            (let (pos =[int] (+ env_pos 1))
                              (before middle_end/flambda/closure_offsets.ml(32):1783-2444
                                (let
                                  (env_pos =[int]
                                     (let
                                       (arity =[int]
                                          (after middle_end/flambda/closure_offsets.ml(33):1815-1857
                                            (apply
                                              (field 3
                                                (global Flambda_utils!))
                                              function_decl)))
                                       (before middle_end/flambda/closure_offsets.ml(34):1867-2053
                                         (+ (+ (+ (+ env_pos 1) 1) 1)
                                           (if (> arity 1)
                                             (before middle_end/flambda/closure_offsets.ml(38):2044-2045
                                               1)
                                             (before middle_end/flambda/closure_offsets.ml(38):2051-2052
                                               0))))))
                                  (before middle_end/flambda/closure_offsets.ml(40):2105-2444
                                    (let
                                      (closure_id =
                                         (after middle_end/flambda/closure_offsets.ml(40):2122-2140
                                           (apply
                                             (field 9 (global Closure_id!))
                                             id)))
                                      (before middle_end/flambda/closure_offsets.ml(41):2148-2444
                                        (seq
                                          (if
                                            (after middle_end/flambda/closure_offsets.ml(41):2151-2184
                                              (apply
                                                (field 2
                                                  (field 7
                                                    (global Closure_id!)))
                                                closure_id map))
                                            (before middle_end/flambda/closure_offsets.ml(41):2190-2369
                                              (after middle_end/flambda/closure_offsets.ml(41):2190-2369
                                                (apply
                                                  (field 1 (global Misc!))
                                                  [0:
                                                   [11:
                                                    "Closure_offsets.add_closure_offsets: function offset for "
                                                    [15:
                                                     [11:
                                                      " would be defined multiple times"
                                                      0a]]]
                                                   "Closure_offsets.add_closure_offsets: function offset for %a would be defined multiple times"]
                                                  (field 5
                                                    (global Closure_id!))
                                                  closure_id)))
                                            0a)
                                          (before middle_end/flambda/closure_offsets.ml(46):2375-2444
                                            (let
                                              (map =
                                                 (after middle_end/flambda/closure_offsets.ml(46):2385-2422
                                                   (apply
                                                     (field 3
                                                       (field 7
                                                         (global Closure_id!)))
                                                     closure_id pos map)))
                                              (before middle_end/flambda/closure_offsets.ml(47):2430-2444
                                                (makeblock 0 (*,int) map
                                                  env_pos))))))))))))))))
                 (before middle_end/flambda/closure_offsets.ml(49):2452-3772
                   (let
                     (*match* =
                        (after middle_end/flambda/closure_offsets.ml(50):2498-2587
                          (apply (field 12 (field 7 (global Variable!)))
                            assign_function_offset (field 3 function_decls)
                            (makeblock 0 (*,int) function_offsets -1)))
                      free_variable_pos =a (field 1 *match*)
                      function_offsets =a (field 0 *match*))
                     (before middle_end/flambda/closure_offsets.ml(61):3103-3772
                       (let
                         (assign_free_variable_offset =
                            (function var param param
                              (funct-body middle_end/flambda/closure_offsets.ml(61)<ghost>:3135-3567
                                (let
                                  (pos =a (field 1 param)
                                   map =a (field 0 param))
                                  (before middle_end/flambda/closure_offsets.ml(62):3158-3567
                                    (let
                                      (var_within_closure =
                                         (after middle_end/flambda/closure_offsets.ml(62):3183-3210
                                           (apply
                                             (field 9
                                               (global Var_within_closure!))
                                             var)))
                                      (before middle_end/flambda/closure_offsets.ml(63):3218-3567
                                        (seq
                                          (if
                                            (after middle_end/flambda/closure_offsets.ml(63):3221-3270
                                              (apply
                                                (field 2
                                                  (field 7
                                                    (global Var_within_closure!)))
                                                var_within_closure map))
                                            (before middle_end/flambda/closure_offsets.ml(63):3276-3476
                                              (after middle_end/flambda/closure_offsets.ml(63):3276-3476
                                                (apply
                                                  (field 1 (global Misc!))
                                                  [0:
                                                   [11:
                                                    "Closure_offsets.add_closure_offsets: free variable offset for "
                                                    [15:
                                                     [11:
                                                      " would be defined multiple times"
                                                      0a]]]
                                                   "Closure_offsets.add_closure_offsets: free variable offset for %a would be defined multiple times"]
                                                  (field 5
                                                    (global Var_within_closure!))
                                                  var_within_closure)))
                                            0a)
                                          (before middle_end/flambda/closure_offsets.ml(68):3482-3567
                                            (let
                                              (map =
                                                 (after middle_end/flambda/closure_offsets.ml(68):3492-3545
                                                   (apply
                                                     (field 3
                                                       (field 7
                                                         (global Var_within_closure!)))
                                                     var_within_closure pos
                                                     map)))
                                              (before middle_end/flambda/closure_offsets.ml(69):3553-3567
                                                (makeblock 0 (*,int) map
                                                  (+ pos 1)))))))))))))
                         (before middle_end/flambda/closure_offsets.ml(71):3575-3772
                           (let
                             (*match* =
                                (after middle_end/flambda/closure_offsets.ml(72):3610-3714
                                  (apply
                                    (field 12 (field 7 (global Variable!)))
                                    assign_free_variable_offset free_vars
                                    (makeblock 0 (*,int)
                                      free_variable_offsets
                                      free_variable_pos)))
                              free_variable_offsets =a (field 0 *match*))
                             (before middle_end/flambda/closure_offsets.ml(75):3722-3772
                               (makeblock 0 function_offsets
                                 free_variable_offsets)))))))))))))
     compute =
       (function program
         (funct-body middle_end/flambda/closure_offsets.ml(79)<ghost>:3786-4067
           (before middle_end/flambda/closure_offsets.ml(80):3816-4067
             (let
               (init =
                  (makeblock 0 (field 0 (field 7 (global Closure_id!)))
                    (field 0 (field 7 (global Var_within_closure!)))))
               (before middle_end/flambda/closure_offsets.ml(85):3956-4067
                 (let
                   (r =
                      (after middle_end/flambda/closure_offsets.ml(86):3968-4058
                        (apply (field 20 (global Stdlib__list!))
                          add_closure_offsets init
                          (after middle_end/flambda/closure_offsets.ml(87):4014-4058
                            (apply (field 24 (global Flambda_utils!))
                              program)))))
                   (before middle_end/flambda/closure_offsets.ml(89):4066-4067
                     r))))))))
    (pseudo _none_(0)<ghost>:-1--1 (makeblock 0 compute))))
